<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Analysis & Forecast</title>
    <!-- Using Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white">
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-4xl font-bold text-center mb-8">ARIMA & Reddit Stock Forecast ðŸ“ˆ</h1>
        
        <!-- The form now only requires a stock ticker. It submits a POST request to our /analyze endpoint. -->
        <form id="analysis-form" action="/analyze" method="post" class="max-w-md mx-auto">
            <div class="flex items-center border-b-2 border-teal-500 py-2">
                <input class="appearance-none bg-transparent border-none w-full text-white mr-3 py-1 px-2 leading-tight focus:outline-none" type="text" name="ticker" placeholder="Enter Stock Ticker (e.g., AAPL)">
                <button class="flex-shrink-0 bg-teal-500 hover:bg-teal-700 border-teal-500 hover:border-teal-700 text-sm border-4 text-white py-1 px-2 rounded" type="submit">
                    Analyze
                </button>
            </div>
        </form>

        <!-- This block will display an error message if the form submission is invalid (e.g., bad ticker). -->
        {% if error %}
            <div class="bg-red-500 text-white p-4 rounded-lg mt-8 max-w-md mx-auto">
                <p>{{ error }}</p>
            </div>
        {% endif %}

        <!-- A simple loading indicator that is shown when the form is submitted. -->
        <div id="loading-indicator" class="hidden text-center p-4">
            <p class="text-lg text-teal-400">Contacting server, please wait...</p>
        </div>

    </div>

    <script>
        // This script shows the loading indicator when the user clicks the "Analyze" button.
        document.getElementById('analysis-form').addEventListener('submit', function() {
            document.getElementById('loading-indicator').classList.remove('hidden');
        });
    </script>
</body>
</html>